{% extends 'base.html' %}

{% block content %}
<style>
    #neighborhood path {
        fill:blue;
        stroke:yellow;
        opacity:.8;
    }

    #neighborhood path:hover {
        opacity:.3;
    }
</style>
<div id="selector">
  <select id="changer">
    {% for neighborhood in neighborhoods %}
      <option value="{{ neighborhood.id }}">{{ neighborhood.neighborho }}</option>
    {% endfor %}
</select>
<div id="position">Lat: <span id="lat"></span>; Long: <span id="long"></span></div>
</div>
<div id="map">
</div>
{% endblock %}

{% block custom_scripts %}
<script type="text/javascript">
var po = org.polymaps;

var map = po.map()
    .container(document.getElementById("map").appendChild(po.svg("svg")))
    .add(po.interact())
    .add(po.hash())
    .center({lat: 37.76, lon: -122.44})
    .zoom(13);

map.add(po.image()
        .url(po.url("http://{S}tile.cloudmade.com"
                + "/b60fbbd51f17456794d2b0e4ed4f0d0c"
                + "/1714/256/{Z}/{X}/{Y}.png")
            .hosts(["a.", "b.", "c.", ""])));

var neighborhood = po.geoJson()
    .url("/neighborhoods.json")
    .id("neighborhood")
    .zoom(13)
    .tile(false);

map.add(neighborhood);

map.add(po.compass()
    .pan("none"));

document.getElementById("changer").onchange = function (e) {
  neighborhood.stylist().attr("fill-opacity", .5);
};

document.getElementById("map").onmousemove = function(e) {
    var loc = map.pointLocation(map.mouse(e));
    document.getElementById("lat").innerHTML = loc.lat;
    document.getElementById("long").innerHTML = loc.lon;
};
</script>
{% endblock %}
